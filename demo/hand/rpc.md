# rpc

目的，熟悉netty，熟悉rpc的过程。

代码正在重新整理，预计整理计划会排到7月份吧。目前放的是需要本身去调整设置的代码，不能说直接加入就能使用。

## 理解Rpc?

Remote Procedure Call

远程服务调用，本地服务调用，可以有很多种方式，可以看作进程通信也行。里面有一个过程是可以通过socket进行通信。

rpc本身做的事情很清晰，但是具体实施起来需要进行协约与规定，也就是rpc协议，在这种思想下进行调用。而如果每次socket调用都需要去关注连接，解析，返回等过程，负担很大。有一种行为非常适合此种情况，代理设计模式。

在Aop中，也体现了屏蔽细节，用户无关等特性。而rpc想做的是服务调用，屏蔽掉远程的细节，让服务调用者只关心调用过程即可。而Rpc框架相当于在以下的事情。

1. 中心服务发现。
2. 中心服务注册。
3. 使用远程对象调用函数。
4. 远程对象实际调用函数。
5. 调用方包装。
6. 提供方包装。



### 注册中心

发现与注册通过在v 1.0版本使用redis。

在v1.1版本使用了更加可靠的zookeeper。



### 调用方

服务请求者，会首先取得一个调用方接口。

然后使用ioc装入，动态代理后对象。

动态代理：请求服务中心，关于该服务的ip与端口，然后序列化请求，发给服务提供方，底层使用netty。



### 提供方

提供者会生成一个自身的id，然后服务中心放id，然后根据id去寻找有没有ip，没有就说明服务g了。

动态代理：将对应的接口进行实例化，并且执行调用的过程，接受与返回结构都使用netty为底层。